{"version":3,"sources":["users/user-form.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAYA;gBAKE,2BACE,EAAe,EACP,OAAe,EACf,YAAyB,EACzB,YAAyB;oBAFzB,YAAO,GAAP,OAAO,CAAQ;oBACf,iBAAY,GAAZ,YAAY,CAAa;oBACzB,iBAAY,GAAZ,YAAY,CAAa;oBANnC,SAAI,GAAG,IAAI,WAAI,EAAE,CAAC;oBAQhB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,KAAK,CAAC;wBACjB,IAAI,EAAE,CAAC,EAAE,EAAE,mBAAU,CAAC,QAAQ,CAAC;wBAC/B,KAAK,EAAE,CAAC,EAAE,EAAE,iCAAe,CAAC,KAAK,CAAC;wBAClC,KAAK,EAAE,EAAE;wBACT,OAAO,EAAE,EAAE,CAAC,KAAK,CAAC;4BAChB,MAAM,EAAE,EAAE;4BACV,KAAK,EAAE,EAAE;4BACT,IAAI,EAAE,EAAE;4BACR,OAAO,EAAE,EAAE;yBACZ,CAAC;qBACL,CAAC,CAAC;gBACL,CAAC,CAAC,qBAAqB;gBAEvB,0BAA0B;gBAC1B,gCAAI,GAAJ;oBAAA,iBAYC;oBAXC,IAAI,MAAM,CAAC;oBACX,EAAE,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA,CAAC;wBACf,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;oBAClD,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;oBAC/C,CAAC;oBAED,MAAM,CAAC,SAAS,CAAC,UAAA,CAAC;wBAChB,2DAA2D;wBAC3D,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBACnC,CAAC,CAAC,CAAA;gBACJ,CAAC;gBAED,8CAA8C;gBAC9C,oCAAQ,GAAR;oBAAA,iBAeC;oBAdC,IAAI,EAAE,GAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBACtC,IAAI,CAAC,KAAK,GAAG,EAAE,GAAG,WAAW,GAAG,UAAU,CAAC;oBAC3C,EAAE,CAAA,CAAC,CAAC,EAAE,CAAC,CAAA,CAAC;wBACN,MAAM,CAAC;oBACT,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,CAAC;6BAC1B,SAAS,CACR,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,IAAI,GAAG,IAAI,EAAhB,CAAgB,EACxB,UAAA,QAAQ;4BACN,EAAE,CAAA,CAAC,QAAQ,CAAC,MAAM,IAAI,GAAG,CAAC,CAAA,CAAC;gCACzB,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;4BACtC,CAAC;wBACH,CAAC,CAAC,CAAC;oBACT,CAAC;gBACH,CAAC;gBAED,4EAA4E;gBAC5E,+CAAmB,GAAnB;oBACE,EAAE,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA,CAAC;wBAClB,MAAM,CAAC,OAAO,CAAC,mEAAmE,CAAC,CAAC;oBACtF,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,MAAM,CAAC,IAAI,CAAC;oBACd,CAAC;gBACH,CAAC;gBApEH;oBAAC,gBAAS,CAAC;wBACT,WAAW,EAAE,oCAAoC;wBACjD,SAAS,EAAE,CAAC,0BAAW,CAAC;qBACzB,CAAC;;qCAAA;gBAkEF,wBAAC;YAAD,CAjEA,AAiEC,IAAA;YAjED,iDAiEC,CAAA","file":"users/user-form.component.js","sourcesContent":["import {Component, OnInit} from 'angular2/core';\nimport {ControlGroup, FormBuilder, Validators} from 'angular2/common';\nimport {CanDeactivate, Router, RouteParams} from 'angular2/router';\nimport {UserService} from './user.service'\n\nimport {BasicValidators} from '../shared/basicValidators';\nimport {User} from './user'\n\n@Component({\n  templateUrl: 'templates/user-form.component.html',\n  providers: [UserService]\n})\nexport class UserFormComponent implements OnInit, CanDeactivate {\n  form: ControlGroup;\n  title: string;\n  user = new User();\n\n  constructor(\n    fb: FormBuilder,\n    private _router: Router,\n    private _routeParams: RouteParams,\n    private _userService: UserService\n  ) {\n    this.form = fb.group({\n        name: ['', Validators.required],\n        email: ['', BasicValidators.email],\n        phone: [],\n        address: fb.group({\n          street: [],\n          suite: [],\n          city: [],\n          zipcode: []\n        })\n    });\n  } // end of constructor\n\n  //When creating a new user\n  save(){\n    var result;\n    if(this.user.id){\n      result = this._userService.updateUser(this.user)\n    } else {\n      result = this._userService.addUser(this.user)\n    }\n\n    result.subscribe(x => {\n      //When user clicks post to API and redirect to another page\n      this._router.navigate(['Users']);\n    })\n  }\n\n  //Just after constructor runs, ngOnInit is run\n  ngOnInit(){\n    var id  = this._routeParams.get('id');\n    this.title = id ? 'Edit User' : 'Add User';\n    if(!id){\n      return;\n    } else {\n      this._userService.getUser(id)\n        .subscribe(\n          user => this.user = user,\n          response => {\n            if(response.status == 404){\n              this._router.navigate(['NotFound']);\n            }\n          });\n    }\n  }\n\n  //Trigger the alert box if user tries to naviagte away with unsaved changes.\n  routerCanDeactivate(){\n    if(this.form.dirty){\n      return confirm('You have unsaved changes. Are you sure you want to naviagte away?');\n    } else {\n      return true;\n    }\n  }\n}\n"],"sourceRoot":"/source/"}